<?php
/**
 * Twenty'em WordPress Framework.
 *
 * WARNING: This file is part of Twenty'em WordPress Framework.
 * DO NOT edit this file under any circumstances. Do all your modifications in the form of a child theme.
 *
 * @package			WordPress
 * @subpackage		Twenty'em
 * @author			RogerTM
 * @license			license.txt
 * @link			https://themingisprose.com/twenty-em
 * @since 			Twenty'em 1.4.0
 */

/**
 * Get the Call to Action's hooks
 * @return array
 *
 * @since Twenty'em 1.4.0
 */
function t_em_get_call_action(){
	$tags = array();
	foreach ( t_em_call_actions_options() as $action ) :
		if ( t_em( 'hook_to_'. $action['name'] ) != '' ) :
			$hooks = array( t_em( 'hook_to_'. $action['name'] ) => $action['name'] );
			$tags = array_merge( $tags, $hooks );
		endif;
	endforeach;
	return $tags;
}

/**
 * The Call to Action
 *
 * @since Twenty'em 1.4.0
 */
function t_em_call_action( $action ){
	if ( ! $action )
		return;

	echo '<h4>'. t_em( 'headline_'. $action ) .'</h4>';
	echo '<p>'. t_em( 'content_'. $action ) .'</p>';
}

/**
 * Print the Call to Action
 * @todo Make it work
 *
 * @since Twenty'em 1.4.0
 */
function t_em_print_call_action(){
	$tags = t_em_get_call_action();
	foreach ( $tags as $tag => $action ) :
		$hook = t_em( 'hook_to_'. $action );
		if ( $tag != $hook )
			return;
		t_em_call_action( $action );
	endforeach;
}

/**
 * Initializer the Call to Actions
 * @todo Make it work
 *
 * @since Twenty'em 1.4.0
 */
function t_em_init_call_action(){
	foreach ( t_em_get_call_action() as $tag => $action ) :
		add_action( $tag , 't_em_print_call_action', 10, 1 );
	endforeach;
}
add_action( 'wp', 't_em_init_call_action' );
?>
