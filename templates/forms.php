<?php
/**
 * Twenty'em WordPress Framework.
 *
 * WARNING: This file is part of Twenty'em WordPress Framework.
 * DO NOT edit this file under any circumstances. Do all your modifications in the form of a child theme.
 *
 * @package			WordPress
 * @subpackage		Twenty'em
 * @author			RogerTM
 * @license			license.txt
 * @link			https://themingisprose.com/twenty-em
 * @since 			Twenty'em 1.2
 */

/**
 * Make comments form fields Bootstrap like
 *
 * @since Twenty'em 1.2
 */
function t_em_comment_form_fields(){
	$commenter 	= wp_get_current_commenter();
	$req		= get_option( 'require_name_email' );
	$aria_req	= ( $req ? " aria-required='true'" : '' );
	$html_req	= ( $req ? " required='required'" : '' );
	$html5		= current_theme_supports( 'html5' ) ? true : null;
	$form_group	= '<div class="form-group %s">%s</div>';
	$fields = array(
		'author'	=> sprintf( $form_group, 'comment-form-author',
						'<label for="author">'. __( 'Name', 't_em' ) .( $req ? ' <span class="required">*</span>' : '' ) . '</label> '.
						'<input id="author" name="author" type="text" class="form-control" value="' . esc_attr( $commenter['comment_author'] ) . '" aria-describedby="author" maxlength="245"' . $aria_req . $html_req . ' />' ),
		'email'		=> sprintf( $form_group, 'comment-form-email',
						'<label for="email">'. __( 'Email', 't_em' ) .( $req ? ' <span class="required">*</span>' : '' ) . '</label> '.
						'<input id="email" name="email" ' . ( $html5 ? 'type="email"' : 'type="text"' ) . ' class="form-control" value="' . esc_attr( $commenter['comment_author_email'] ) . '" aria-describedby="email-notes" maxlength="100"' . $aria_req . $html_req . ' />' ),
		'url'		=> sprintf( $form_group, 'comment-form-url',
						'<label for="url">'. __( 'Website', 't_em' ) .'</label> '.
						'<input id="url" name="url" ' . ( $html5 ? 'type="url"' : 'type="text"' ) . ' class="form-control" value="' . esc_attr( $commenter['comment_author_url'] ) . '" aria-describedby="email-notes" maxlength="200" />' ),
	);
	return $fields;
}
add_filter('comment_form_default_fields', 't_em_comment_form_fields');

/**
 * Make comments textarea Bootstrap like
 *
 * @since Twenty'em 1.2
 */
function t_em_comment_form_textarea() {
	$comment_area = '<div class="form-group comment-form-comment"><label for="comment">' . __( 'Comment', 't_em' ) . '</label>' .
					'<textarea id="comment" class="form-control" name="comment" rows="8" aria-required="true" required="required" maxlength="65525"></textarea></div>';
	return $comment_area;
}
add_filter('comment_form_field_comment', 't_em_comment_form_textarea');

/**
 * Retrieve protected post password form content. This function is attached to the the_password_form
 * filter
 *
 * @since Twenty'em 1.0
 */
function t_em_the_password_form(){
	global $post;
	$label = 'pwbox-' . ( empty( $post->ID ) ? rand() : $post->ID );
	$output = 	'<form class="" action="' . esc_url( site_url( 'wp-login.php?action=postpass', 'login_post' ) ) . '" method="post">
					<div class="form-group">
						<p>' . __( 'This content is password protected. To view it please enter your password below:', 't_em' ) . '</p>
						<label for="'. $label .'">'. __( 'Password', 't_em' ) .'</label>
						<input id="' . $label . '" type="password" class="form-control" name="post_password">
						<span class="input-group-btn">
							<button class="btn btn-primary" type="submit" name="Submit" title="' . esc_attr__( 'Submit', 't_em' ) . '">'. esc_attr__( 'Submit', 't_em' ) .'</button>
						</span>
					</div>
				</form>';
	return $output;
}
add_filter( 'the_password_form', 't_em_the_password_form' );
?>
