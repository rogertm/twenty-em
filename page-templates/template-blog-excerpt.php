<?php
/**
 * Twenty'em WordPress Framework.
 *
 * WARNING: This file is part of Twenty'em WordPress Framework.
 * DO NOT edit this file under any circumstances. Do all your modifications in the form of a child theme.
 *
 * @package			WordPress
 * @subpackage		Twenty'em
 * @author			RogerTM
 * @license			license.txt
 * @link			https://themingisprose.com/twenty-em
 * @since 			Twenty'em 1.0
 */

/**
 * Template Name: Blog Excerpt (summary)
 *
 * A custom page template to display a blog excerpt summary.
 */

get_header(); ?>

		<section id="main-content" <?php t_em_breakpoint( 'main-content' ); ?>>
			<section id="content" role="main" <?php t_em_breakpoint( 'content' ); ?>>
				<?php do_action( 't_em_action_content_before' ); ?>
				<?php
				// Query for Custom Loop
				/**
				 * Filter this custom query
				 *
				 * @param array Arguments for WP_Query
				 * @since Twenty'em 1.4.0
				 */
				$args = apply_filters( 't_em_filter_template_blog_excerpt_query_args', array(
					'post_type'			=> 'post',
					'posts_per_page'	=> get_option( 'posts_per_page' ),
					'paged'				=> get_query_var( 'paged' )
				) );
				$the_query = new WP_Query ( $args );

				$content = ( t_em( 'archive_in_columns' ) == 1 && t_em( 'excerpt_set' ) != 'thumbnail-center' ) ? 'excerpt' : 'columns';
				$cols = ( t_em( 'archive_in_columns' ) > 1 || t_em( 'excerpt_set' ) == 'thumbnail-center' ) ? true : null;

				if ( $the_query->have_posts() ) :
					if ( $cols ) :
						echo '<div class="row">';
						$i = 0;
					endif;

					while ( $the_query->have_posts() ) :
						$the_query->the_post();
						if ( $cols && 0 == $i % t_em( 'archive_in_columns' ) ) :
							echo '</div>';
							echo '<div class="row">';
						endif;
						get_template_part( '/template-parts/content', $content );
						if ( $cols ) :
							$i++;
						endif;
					endwhile;

					if ( $cols ) :
						echo '</div>';
					endif;
				else :
					get_template_part( '/template-parts/content', 'none' );
				endif;
				wp_reset_postdata();
				t_em_page_navi( $the_query );
				?>
				<?php do_action( 't_em_action_content_after' ); ?>
			</section><!-- #content -->
			<?php get_sidebar(); ?>
			<?php get_sidebar( 'alt' ); ?>
		</section><!-- #main-content -->

<?php get_footer(); ?>
